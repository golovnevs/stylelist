<html>
<head></head>
<body>
<h1>RESULTS</h1>

<form id="myForm">
	<input type="text" name="myText">
	<button type="submit">Add</button>
</form>

<pre id="results"></pre>
<script>
  const resultsBlock = document.getElementById('results')

  const getResults = () => {
    const response = fetch('http://localhost:3000/get-results')
    response.then(res => {
      const responseBodyAsJson = res.json()
      responseBodyAsJson.then(data => {
        console.log(data)
        resultsBlock.innerHTML = JSON.stringify(data, null, 2)
      })
    })
    response.catch(error => {
      resultsBlock.innerHTML = error
    })
  }
  getResults()

  const myForm = document.getElementById('myForm')
	myForm.addEventListener('submit', (e) => {
      e.preventDefault()

      const response = fetch('http://localhost:3000/save-results', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({text: e.target.myText.value})
      })
      response.then(() => {
        getResults()
      })
      e.target.myText.value = ''
	})
</script>
</body>
</html>
